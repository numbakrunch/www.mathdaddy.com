<html>
<head>
<title>canvas | mathdaddy.com</title>
<link href="/sploip.gif" rel="shortcut icon" type="image/x-icon" />
<style>
  body {
    background: #b6d6ff;
    margin: 0;
  }
  #canvas {
    width: 100%;
    height: 100%;
    border: none;
    margin: 0;
    position: absolute;
    top: 0;
    left: 0;
    z-index:50;
  }
  #button {
    position: absolute;
    z-index: 100;
  }
  #socialmedia {
    position: absolute;
    z-index: 100;
    bottom: 3px;
    right: 3px;
	display: none;
  }
  #socialmedia a img {
    width: 64px;
    height: 64px;
    float: left;
    border: none;
  }
  .filter {
	-webkit-filter: blur(0px);
	filter: blur(0px);
  }
</style>
</head>
<body>
<br />&nbsp;Move your mouse over this. Try another browser if you don't see anything.
<div class="filter">
<canvas id='canvas' width='100%' height='100%'></canvas>
<div>
<div id='socialmedia'>
<a href='https://www.facebook.com/numbakrunch'><img src='http://png-3.findicons.com/files/icons/818/aquaticus_social/64/facebook.png'></a>
<a href='https://twitter.com/numbakrunch'><img src='http://png-3.findicons.com/files/icons/818/aquaticus_social/64/twitter.png'></a>
<a href='https://plus.google.com/+DanSm%C3%AFth0/posts'><img src='http://web16.12679-10.whserv.de/kurse/webbasys/layout/typo3/images/google_plus_logo.png'></a>
</div>
<script type='text/javascript'>

function setPixel(imageData, x, y, r, g, b, a) {
  index = (x + y * imageData.width) * 4;
  imageData.data[index+0] = r;
  imageData.data[index+1] = g;
  imageData.data[index+2] = b;
  imageData.data[index+3] = a;
}

element = document.getElementById('canvas');
c = element.getContext('2d');

element.width = window.innerWidth / 1;
element.height = window.innerHeight / 1;
width = element.width;
height = element.height;

imageData = c.createImageData(width, height);

mouseX = 400;
mouseY = 200;

dragX = 0;
dragY = 0;

var mousetrack = document.body;
mousetrack.onmousemove = updateCanvas;
mousetrack.onload = updateCanvas;
mousetrack.addEventListener('touchmove', updateCanvas);

mousetrack.onload = setInterval(function() {dragX = (dragX + 999990)%1000000; updateCanvas();}, 40);
//setInterval("updateCanvas()", 50);

function updateCanvas(e) {

  if (e) {
    if (e.changedTouches) {
      var touch = e.changedTouches[0];
      mouseX = touch.clientX;
      mouseY = touch.clientY;
    } else {
      mouseX = e.pageX - this.offsetLeft;
      mouseY = e.pageY - this.offsetTop;
    }
  }

  //if (!(mouseX) || !(mouseY)) {mouseX = 0; mouseY = 0;}
  pos = 0;
  console.log('dragX = ' + dragX);
  for (y = 0; y < height; y++) {
    for (x = 0; x < width; x++) {
      offsetX = (x + 370) * 1 + Math.floor(mouseX / 24);
      offsetY = (y + 1000) * 1 + Math.floor(mouseY / 24);
      brightness = (offsetX * offsetX + offsetY * offsetY);
      brightness = brightness + ((x + 3 * y) % 5) * 51 + mouseX * 1 + mouseY * 1;
      brightness = brightness + dragX + dragY;
      // red, green, blue, alpha
      imageData.data[pos++] = Math.abs(( brightness % 510) - 255);
      imageData.data[pos++] = Math.abs(( (brightness + mouseX) % 510) - 255);
      imageData.data[pos++] = Math.abs(( (brightness + mouseY) % 510) - 255);
      imageData.data[pos++] = 255;
    }
  }

c.putImageData(imageData, 0, 0);
};
</script>
<script>
if (window.location.search.substring(1,7) == "googlesfgsfdgsdg") {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-45930721-1', 'mathdaddy.com');
  ga('send', 'pageview');
}
</script>
</body>
</html>
